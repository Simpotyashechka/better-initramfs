better-initramfs
================

Piotr Karbowski <jabberuser@gmail.com>

This project *may* contain some code from initramfs projects that can be found on github, gentoo-wiki.com and jootamam.net.

Goal
====
The goal is to make an easy to use initramfs with support for dmcrypted rootfs, rootfs over LVM array and the remote rescue shell (sshd). 

Status
======
dmcrypt support - works.
lvm rootfs support - works.
dmcrypt rootfs over lvm - should work, not tested.
lvm rootfs over dmcrypt - same as above.
remote rescue shell - not yet.

Usage
=====
This docs is based on Funtoo/Gentoo GNU/Linux so package names etc. can be different than in your distro.

build with static use flag:
sys-apps/busybox
sys-fs/cryptsetup
sys-fs/lvm2

go to initramfs_root/bin dir and:
cp -v /bin/busybox busybox
cp -v /sbin/cryptsetup cryptsetup
cp -v /sbin/lvm.static lvm
ln -s busybox sh
ln -s busybox bb

Now, copy one of config.example to 'config' and edit it. Each env like root, lvm etc can be set with a kernel boot parameter. Now, go up one level outside the initramfs_root dir (cd ..) and execute 'sh testbindir.sh', you should get something like:
[ OK ] busybox found.
[ OK ] lvm found.
[ OK ] cryptsetup found.
[ OK ] bb is symlink to busybox.
[ OK ] sh is symlink to busybox.

Now just pack your initramfs image by 'sh make_initramfs.sh' and you should have a shiny brand-new initramfs.cpio.gz ready for use.

PS.
===
Feel free to report any issue or feature request direct to me, also, feel free to send patch for my buggy english or other buggy code in this project. ;-)
